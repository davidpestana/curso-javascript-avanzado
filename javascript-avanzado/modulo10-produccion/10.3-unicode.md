# 10.3 Cuestiones Unicode

## 🌐 ¿Qué es Unicode?

Unicode es el **estándar universal de codificación de caracteres** que permite representar textos de cualquier idioma:
✅ Español con acentos
✅ Árabe, chino, ruso
✅ Símbolos matemáticos
✅ Emojis 😎🔥✅

JavaScript **usa Unicode internamente**, pero hay detalles importantes que debes conocer para evitar bugs con cadenas de texto.

---

## ⚠️ Problema clásico: caracteres especiales

```js
console.log("canción" === "canción"); // true (ok)

console.log("á" === "á"); // false ❗
```

Aunque parecen iguales, uno usa **una sola letra acentuada**, y el otro usa **una "a" + un acento** como caracteres separados.

---

## ✅ Normalizar textos

Para comparar correctamente textos Unicode se usa `.normalize()`.

```js
const a = "á";
const b = "a\u0301"; // "a" + acento
console.log(a === b); // false
console.log(a.normalize() === b.normalize()); // ✅ true
```

---

## 🔤 Puntos de código Unicode

JavaScript usa UTF-16, lo que causa problemas con emojis o caracteres fuera del BMP (Plano Multilingüe Básico):

```js
"😀".length; // 2 😱
```

El emoji ocupa **dos posiciones** en memoria.

---

## ✅ Cómo detectar correctamente longitud Unicode

```js
Array.from("😀").length; // 1 ✅ bien contado
```

---

## 📝 Codificación en JavaScript

Buenas prácticas:

* Siempre guardar archivos en **UTF-8**
* Especificar `<meta charset="UTF-8">` en HTML

```html
<meta charset="UTF-8">
```

---

## 🔒 Escapar caracteres Unicode

```js
"\u00F1"  // ñ
"\u2764"  // ❤
```

---

## 🔍 Buscar Unicode con regex

```js
/^\p{Emoji}+$/u.test("😎🚀"); // true ✅
```

> Nota: `\p{...}` solo funciona con bandera **u** (Unicode)

---

# 🛠 Laboratorio

## 🎯 Objetivos

* Evitar bugs con Unicode
* Contar correctamente caracteres especiales
* Comparar cadenas con acentos correctamente

---

### Ejercicio 1 — Detección de diferencias Unicode

```js
"á" === "a\u0301"; // false
"á".normalize() === "a\u0301".normalize(); // true ✅
```

---

### Ejercicio 2 — Contar emojis correctamente

```js
"hola".length;         // 4
"😎".length;           // 2 ❗
Array.from("😎").length; // 1 ✅
```

---

### Ejercicio 3 — Detectar caracteres especiales

```js
/[^\x00-\x7F]/.test("café"); // true (contiene acento)
```

---

### Ejercicio 4 — Forzar UTF-8 correcto

Añade en tu HTML:

```html
<meta charset="UTF-8">
```

Evita errores tipo "Ã¡" al mostrar acentos.

---

### Ejercicio 5 — Regex con Unicode

```js
/^\p{Letter}+$/u.test("mañana"); // true
```

---

## 🚀 Retos

1. Crea una función `normalizarTexto(texto)` que elimine diferencias Unicode.
2. Cuenta correctamente los caracteres reales de cualquier cadena (incluyendo emojis).
3. Detecta si una cadena contiene símbolos no latinos (por ejemplo chino o árabe).