# 10.7 Pruebas unitarias en JavaScript

## 🧩 ¿Qué son las pruebas unitarias?

Las **pruebas unitarias** (unit tests) sirven para comprobar que **una parte pequeña del código funciona correctamente** (normalmente una función o módulo).

Nos ayudan a:
✅ Detectar errores antes
✅ Evitar regresiones
✅ Tener confianza al refactorizar código
✅ Mantener código profesional

---

## 🛠 Herramientas populares para testing

| Herramienta  | Uso                                |
| ------------ | ---------------------------------- |
| Jest         | ✅ La más popular (Node & Frontend) |
| Mocha + Chai | Clásica y flexible                 |
| Vitest       | Rápida para proyectos modernos     |
| Jasmine      | Alternativa simple                 |

En este curso usaremos **Jest** porque es muy accesible y fácil.

---

## ✅ Instalar Jest (opcional – entorno Node)

```bash
npm init -y
npm install --save-dev jest
```

Y en `package.json` añade:

```json
"scripts": {
  "test": "jest"
}
```

---

## 🧪 Primera prueba unitaria

Archivo: `suma.js`

```js
function suma(a, b) {
  return a + b;
}
module.exports = suma;
```

Archivo: `suma.test.js`

```js
const suma = require("./suma");

test("suma 2 + 3 = 5", () => {
  expect(suma(2, 3)).toBe(5);
});
```

Ejecutar pruebas:

```bash
npm test
```

---

## ✅ Tipos de matchers (comparadores)

```js
expect(10).toBe(10);                     // igualdad estricta
expect({a:1}).toEqual({a:1});           // comparar objetos
expect(10).toBeGreaterThan(5);          // comparaciones
expect("Hola").toMatch(/Ho/);           // regex
expect([1,2,3]).toContain(2);           // arrays
expect(() => error()).toThrow();        // errores
```

---

## 🎯 Tests para funciones reales

Archivo: `esPar.js`

```js
function esPar(n) {
  return n % 2 === 0;
}
module.exports = esPar;
```

Test:

```js
const esPar = require("./esPar");

test("4 es par", () => {
  expect(esPar(4)).toBe(true);
});
```

---

# 🛠 Laboratorio

## 🎯 Objetivos

* Crear y ejecutar pruebas unitarias con Jest
* Escribir tests simples para funciones
* Usar expect() para validar resultados

---

### Ejercicio 1 — Test básico

```js
test("1 + 1 = 2", () => {
  expect(1 + 1).toBe(2);
});
```

---

### Ejercicio 2 — Probar función suma

```js
const suma = (a, b) => a + b;
test("suma correctamente", () => {
  expect(suma(5, 7)).toBe(12);
});
```

---

### Ejercicio 3 — Probar lógica

```js
function esMayorDeEdad(edad) {
  return edad >= 18;
}
test("mayoría de edad", () => {
  expect(esMayorDeEdad(20)).toBe(true);
});
```

---

### Ejercicio 4 — Probar errores

```js
function dividir(a, b) {
  if (b === 0) throw new Error("No se divide entre cero");
  return a / b;
}

test("lanza error al dividir entre cero", () => {
  expect(() => dividir(5, 0)).toThrow();
});
```

---

### Ejercicio 5 — Probar arrays

```js
test("contiene elemento", () => {
  expect([1, 2, 3]).toContain(2);
});
```

---

## 🚀 Retos

1. Crea una función `invertirTexto("hola") → "aloh"` y escribe sus tests.
2. Haz tests para una calculadora con suma, resta, multiplicación y división.
3. Testea una función que valide emails correctamente.
